{% load static %}
<script src="{% static 'css/index.css' %}"></script>
<link href="{% static 'css/enquire.css' %}" rel="stylesheet" />
<script src="{% static 'js/enquire.js' %}"></script>
<script src="{% static 'js/crafts.js' %}"></script>
{% load static %}
<link href="{% static 'css/index.css' %}" rel="stylesheet" />
<script src="{% static 'js/index.js' %}"></script>

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Bee Happy Homemade</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="{% static 'images/bee.png' %}" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->

    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand" href="/">Bee Happy Homemadeüêù</a>
                <button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#portfolio" onclick="viewCraftsHome()">Crafts</a></li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#about" onclick="viewAbout()">About</a></li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="#contact" onclick="viewContact()">Contact</a></li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded active" href="/enquire">Enquire</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        {{ context|json_script:"context" }}
        {{ itemTypes|json_script:"itemTypes" }}
        <!-- Masthead-->
        <header id="pick-design-tab" class="masthead bg-primary text-white text-center" style="background-color: yellow;height: 930px;">
            <section>
            
            <div class="container d-flex align-items-center flex-column">
                <!-- Masthead Avatar Image-->
                <img id="item_picture_value" class="img-fluid" src="{% static 'images/latest-releases/coaster-design-1.jpg' %}" alt="..." / style="width: 40%;border-radius: 25px;background-position: left top;background-repeat: repeat;">   
                <br>
                
                
                <!-- Masthead Heading-->
                <h1 id="selected-name" class="masthead-heading text-uppercase mb-0">Select a Product to Add it to your List!</h1>
                <!-- Icon Divider-->
                <div class="divider-custom divider-light">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Masthead Subheading-->
                <div>
                    <div class="dropdown">
                        <button id="pick-design" class="dropbtn hover">Pick Design</button>
                        
                        <div id="designs-drop" class="dropdown-content">
                            <a onclick="customChoice('Custom')"> Custom</a>
                        </div>
                    </div>
                    <button id="pick-design-add" class="dropbtn hover" onclick="addToEnquiriesList(document.getElementById('selected-name').innerHTML,document.getElementById('pick-design').innerHTML,localStorage.getItem('price'))">Add</button>
                </div>
     

                    <div style="display: inline-block">
                        <p id="price_value" class="masthead-subheading font-weight-light mb-0"  style="padding-top: 15px;font-size: 30px;font-weight: bold;;display:inline-block">¬£</p>
                        <p id="price_info" class="masthead-subheading font-weight-light mb-0"  style="padding-top: 15px;font-size: 30px;font-weight: bold;;display:inline-block">Each2</p>
                    </div>
              
         
     

                 
                
                <p class="masthead-subheading font-weight-light mb-0" style="padding-top: 15px;font-size: 20px"> 
                    If you are intrested in any of our crafts, please add them to your enquire list and submit the form
                     <br>We will get back in touch within 48 hours </p> 
                
              
        </header>

        </section>

        <!-- About Section-->
        <section class="page-section pg-secondary " id="enquire-list"> 
            <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Item List</h2>
  
                <!-- Icon Divider-->
                <div class="divider-custom">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <button id="clear-button" style="color: red;" class="dropbtn hover" onclick="clearList()">Clear List</button>
                <div  id="add-table" style="width: 30%;display: inline;text-align: center;align-items: center;" ></div>
                    <table id="item-list">

                    </table>
                    <p style="padding-left: 10px;font-weight: bold;font-size: 20px;" id="total-price"></p>
                </ul>
                <h3 id="no-crafts-disclaimer" style="display: block;align-items: center;text-align: center;padding-top: 40px;"> No crafts added</h3>
        </section>


        <!-- Contact Section-->
        <section class="page-section" id="enquire">
            <div class="container">
                <!-- Contact Section Heading-->
                <h2 id="enquire-text" class="page-section-heading text-center text-uppercase text-secondary mb-0">Enquire</h2>
                <!-- Icon Divider-->
                <div class="divider-custom">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Contact Section Form-->
                <div class="row justify-content-center">
                    <div class="col-lg-8 col-xl-7">
                        <!-- * * * * * * * * * * * * * * *-->
                        <!-- * * SB Forms Contact Form * *-->
                        <!-- * * * * * * * * * * * * * * *-->
                        <!-- This form is pre-integrated with SB Forms.-->
                        <!-- To make this form functional, sign up at-->
                        <!-- https://startbootstrap.com/solution/contact-forms-->
                        <!-- to get an API token!-->
                        <form id="contactForm" data-sb-form-api-token="API_TOKEN">
                            <!-- Name input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="name" type="text" placeholder="Enter your name..." data-sb-validations="required" />
                                <label for="name">Full name</label>
                                <div class="invalid-feedback" data-sb-feedback="name:required">A name is required.</div>
                            </div>
                            <!-- Email address input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="email" type="email" placeholder="name@example.com" data-sb-validations="required,email" />
                                <label for="email">Email address</label>
                                <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                                <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
                            </div>
                            <!-- Phone number input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="phone" type="tel" placeholder="(123) 456-7890" data-sb-validations="required" />
                                <label for="phone">Phone number</label>
                                <div class="invalid-feedback" data-sb-feedback="phone:required">A phone number is required.</div>
                            </div>
                            <!-- Message input-->
                            <div class="form-floating mb-3">
                                <textarea class="form-control" id="message" type="text" placeholder="Enter your message here..." style="height: 10rem" data-sb-validations="required"></textarea>
                                <label for="message">Message</label>
                                <div class="invalid-feedback" data-sb-feedback="message:required">A message is required.</div>
                            </div>
                            <!-- Submit success message-->
                            <!---->
                            <!-- This is what your users will see when the form-->
                            <!-- has successfully submitted-->
                            <div class="d-none" id="submitSuccessMessage">
                                <div class="text-center mb-3">
                                    <div class="fw-bolder">Form submission <span>successful!</span></div>
                                </div>
                            </div>
                            <!-- Submit error message-->
                            <!---->
                            <!-- This is what your users will see when there is-->
                            <!-- an error submitting the form-->
                            <div class="d-none" id="submitErrorMessage"><div class="text-center text-danger mb-3">Error sending message!</div></div>
                            <!-- Submit Button-->
                            <button class="btn btn-primary btn-xl disabled" id="submitButton" type="submit" onclick="contactSubmit()">Send</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        <script>
            const formatter = new Intl.NumberFormat('en-US', {
            style: 'currency',
            currency: 'GBP',

            // These options are needed to round to whole numbers if that's what you want.
            //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)
            //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)
            });
            if (localStorage.getItem("price") !== null) {
                selected = localStorage.getItem("selectedItem");
                name = localStorage.getItem("name");
                price= localStorage.getItem("price");
                price_info= localStorage.getItem("price_info");
                path = "/static/images/latest-releases/" + selected
                document.getElementById("item_picture_value").src = path
                document.getElementById("selected-name").innerText = name
                document.getElementById("price_value").innerText = formatter.format(Number(price))
                document.getElementById("price_info").innerText = price_info


                folder = localStorage.getItem("folder");
                type = JSON.parse(document.getElementById('itemTypes').innerText)[2]
                //alert(JSON.parse(document.getElementById('context').innerText)[folder])
                for (let i = 0; i < JSON.parse(document.getElementById('context').innerText)[folder].length; i++) {
                    var dropdown = document.getElementById("designs-drop");
                    var opt = document.createElement("a"); 
                    opt.innerText = JSON.parse(document.getElementById('context').innerText)[folder][i]
                    opt.onclick = function(){
                        
                        document.getElementById('pick-design').innerText = "Selected: "+this.innerText
                        document.getElementById('item_picture_value').src = "/static/images/item-types/"+folder+"/"+this.innerText+".jpg"
                        document.getElementById('item_picture_value').style.width
                    };
                    dropdown.appendChild(opt);
                }
            } else {
                
                document.getElementById("enquire-list").style.display = "none"
                document.getElementById("pick-design-tab").style.display = "none"
                document.getElementById("item_picture_value").style.display = "none"
                document.getElementById("price_info").style.display = "none"
                document.getElementById("price_value").style.display = "none"
                document.getElementById("enquire").style.paddingTop = "150px"
                document.getElementById("enquire-text").innerHTML = "Select a Craft for more enquire options"
                
            }
            
            generateItemList()
            calaculateTotal()
        </script>
        <!-- Footer-->
        <footer class="footer text-center">
            <div class="container">
                <div class="row">
                    <!-- Footer Location-->
                    <div class="col-lg-4 mb-5 mb-lg-0">
                        <h4 class="text-uppercase mb-4">Location</h4>
                        <p class="lead mb-0">
                            
                            
                            Surrey
                            <br>
                            England
                            <br />
                            Based in Staines-upon-thamas
                            <br>
                            enquiries@beehappyhomemade.com
                        </p>
                    </div>
                    <!-- Footer Social Icons-->
                    <div class="col-lg-4 mb-5 mb-lg-0">
                        <h4 class="text-uppercase mb-4">Check us out on Facebook</h4>
                        <a class="btn btn-outline-light btn-social mx-1" href="https://www.facebook.com/profile.php?id=100088481917670"><i class="fab fa-fw fa-facebook-f"></i></a>
                    </div>
                    <!-- Footer About Text-->
                    <div class="col-lg-4">
                        <h4 class="text-uppercase mb-4">Upcoming events</h4>
                        <p class="lead mb-0">
                            Please follow our Facebook page for all the latest updates on where you can find our stall next!
                            
                            
                        </p>
                    </div>
                </div>
            </div>
        </footer>
  
        <!-- Copyright Section-->
        <div class="copyright py-4 text-center text-white">
            <div class="container"><small>Copyright &copy; Bee Happy Homemade 2023</small></div>
        </div>
     
       
       
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    </body>
</html>
